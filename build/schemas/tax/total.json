{
  "$schema": "http://json-schema.org/draft/2020-12/schema",
  "$id": "https://gobl.org/draft-0/tax/total",
  "$ref": "#/$defs/Total",
  "$defs": {
    "CategoryTotal": {
      "properties": {
        "code": {
          "type": "string",
          "title": "Code"
        },
        "retained": {
          "type": "boolean",
          "title": "Retained"
        },
        "rates": {
          "items": {
            "$ref": "#/$defs/RateTotal"
          },
          "type": "array",
          "title": "Rates"
        },
        "base": {
          "$ref": "https://gobl.org/draft-0/num/amount",
          "title": "Base"
        },
        "amount": {
          "$ref": "https://gobl.org/draft-0/num/amount",
          "title": "Amount"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "code",
        "rates",
        "base",
        "amount"
      ]
    },
    "RateTotal": {
      "properties": {
        "code": {
          "type": "string",
          "title": "Code"
        },
        "base": {
          "$ref": "https://gobl.org/draft-0/num/amount",
          "title": "Base"
        },
        "percent": {
          "$ref": "https://gobl.org/draft-0/num/percentage",
          "title": "Percent"
        },
        "amount": {
          "$ref": "https://gobl.org/draft-0/num/amount",
          "title": "Amount"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "code",
        "base",
        "percent",
        "amount"
      ]
    },
    "Total": {
      "properties": {
        "categories": {
          "items": {
            "$ref": "#/$defs/CategoryTotal"
          },
          "type": "array",
          "title": "Categories"
        },
        "sum": {
          "$ref": "https://gobl.org/draft-0/num/amount",
          "title": "Sum"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "sum"
      ]
    }
  }
}