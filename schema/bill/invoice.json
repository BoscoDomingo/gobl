{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "$ref": "#/definitions/bill.Invoice",
  "definitions": {
    "bill.Delivery": {
      "properties": {
        "receiver": {
          "$ref": "#/definitions/org.Party",
          "title": "Receiver",
          "description": "The party who will receive delivery of the goods defined in the invoice and is not responsible for taxes."
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "bill.Invoice": {
      "required": [
        "uuid",
        "code",
        "region",
        "currency",
        "issue_date",
        "value_date",
        "supplier",
        "customer",
        "totals"
      ],
      "properties": {
        "uuid": {
          "type": "string",
          "title": "UUID"
        },
        "code": {
          "type": "string",
          "title": "Code",
          "description": "Sequential ID used to identify this invoice in tax declarations."
        },
        "region": {
          "type": "string",
          "title": "Region",
          "description": "Region Code used for tax purposes."
        },
        "currency": {
          "type": "string",
          "title": "Currency",
          "description": "Currency for all invoice totals."
        },
        "rates": {
          "items": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "$ref": "#/definitions/currency.ExchangeRate"
          },
          "type": "array",
          "title": "Exchange Rates",
          "description": "Simple array of values used to convert other currencies into the invoice's main currency."
        },
        "issue_date": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/org.Date",
          "title": "Issue Date"
        },
        "op_date": {
          "$ref": "#/definitions/org.Date",
          "title": "Operation Date"
        },
        "value_date": {
          "$ref": "#/definitions/org.Date",
          "title": "Value Date"
        },
        "supplier": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/org.Party",
          "title": "Supplier",
          "description": "The taxable entity supplying the goods or services."
        },
        "customer": {
          "$ref": "#/definitions/org.Party",
          "title": "Customer",
          "description": "Legal entity who receives the goods or services."
        },
        "lines": {
          "items": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "$ref": "#/definitions/bill.Line"
          },
          "type": "array",
          "title": "Lines",
          "description": "The items sold to the customer."
        },
        "outlays": {
          "items": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "$ref": "#/definitions/bill.Outlay"
          },
          "type": "array",
          "title": "Outlays",
          "description": "Expenses paid for by the supplier but invoiced directly to the customer."
        },
        "totals": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/bill.Totals",
          "title": "Totals"
        },
        "ordering": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/bill.Ordering",
          "title": "Ordering Details"
        },
        "payment": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/bill.Payment",
          "title": "Payment Details"
        },
        "delivery": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/bill.Delivery",
          "title": "Delivery Details"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "bill.Line": {
      "required": [
        "index",
        "quantity",
        "item",
        "sum",
        "total"
      ],
      "properties": {
        "uuid": {
          "type": "string"
        },
        "index": {
          "type": "integer",
          "title": "Index",
          "description": "Line number inside the invoice."
        },
        "quantity": {
          "$ref": "#/definitions/num.Amount"
        },
        "item": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/org.Item"
        },
        "sum": {
          "$ref": "#/definitions/num.Amount",
          "title": "Sum",
          "description": "Result of quantity multiplied by item price"
        },
        "discount": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/org.Discount",
          "title": "Discount",
          "description": "Discount applied to this line."
        },
        "taxes": {
          "items": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "$ref": "#/definitions/tax.Rate"
          },
          "type": "array",
          "title": "Taxes",
          "description": "List of taxes to be applied to the line in the invoice totals."
        },
        "total": {
          "$ref": "#/definitions/num.Amount",
          "title": "Total",
          "description": "Total line amount after applying discounts to the sum."
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "bill.Ordering": {
      "properties": {
        "seller": {
          "$ref": "#/definitions/org.Party",
          "title": "Seller",
          "description": "Party who is selling the goods and is not responsible for taxes."
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "bill.Outlay": {
      "required": [
        "index",
        "name",
        "paid"
      ],
      "properties": {
        "uuid": {
          "type": "string"
        },
        "index": {
          "type": "integer",
          "title": "Index",
          "description": "Line number inside the invoice."
        },
        "name": {
          "type": "string",
          "title": "Name"
        },
        "ref": {
          "type": "string",
          "title": "Reference",
          "description": "A code"
        },
        "desc": {
          "type": "string",
          "title": "Description",
          "description": "Details on what the outlay was."
        },
        "paid": {
          "$ref": "#/definitions/num.Amount",
          "title": "Paid",
          "description": "Amount paid by the supplier."
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "bill.Payment": {
      "properties": {
        "payer": {
          "$ref": "#/definitions/org.Party",
          "title": "Payer",
          "description": "The party responsible for paying for the invoice."
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "bill.Totals": {
      "required": [
        "sum",
        "payable"
      ],
      "properties": {
        "sum": {
          "$ref": "#/definitions/num.Amount",
          "title": "Sum",
          "description": "Sum of all line item sums"
        },
        "discount": {
          "$ref": "#/definitions/num.Amount",
          "title": "Discount",
          "description": "Sum of all discounts applied to each line."
        },
        "total": {
          "$ref": "#/definitions/num.Amount",
          "title": "Total",
          "description": "Sum of all line sums minus the discounts."
        },
        "taxes": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/tax.Total",
          "title": "Tax Totals",
          "description": "Summary of all taxes with a final sum to add or deduct from the amount payable."
        },
        "outlays": {
          "$ref": "#/definitions/num.Amount",
          "title": "Outlay Totals",
          "description": "Total paid in outlays that need to be reimbursed."
        },
        "payable": {
          "$ref": "#/definitions/num.Amount",
          "title": "Payable",
          "description": "Total amount to be paid after applying taxes."
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "currency.ExchangeRate": {
      "required": [
        "currency",
        "value"
      ],
      "properties": {
        "currency": {
          "type": "string"
        },
        "value": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/num.Amount"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "num.Amount": {
      "pattern": "^[0-9]+(\\.[0-9]+)?$",
      "type": "string",
      "title": "Amount",
      "description": "Quantity with optional decimal places that determine accuracy."
    },
    "num.Percentage": {
      "pattern": "^[0-9]+(\\.[0-9]+)?%$",
      "type": "string",
      "title": "Percentage",
      "description": "Similar to an Amount, but designed for percentages and includes % symbol in JSON output."
    },
    "org.Address": {
      "required": [
        "uuid",
        "locality",
        "region"
      ],
      "properties": {
        "uuid": {
          "type": "string",
          "title": "UUID"
        },
        "label": {
          "type": "string",
          "title": "Label",
          "description": "Useful identifier"
        },
        "po_box": {
          "type": "string",
          "title": "Post Office Box",
          "description": "Box number or code for the post office box located at the address."
        },
        "num": {
          "type": "string",
          "title": "Number",
          "description": "House or building number in the street."
        },
        "floor": {
          "type": "string",
          "title": "Floor",
          "description": "Floor number within the building."
        },
        "block": {
          "type": "string",
          "title": "Block",
          "description": "Block number within the building."
        },
        "door": {
          "type": "string",
          "title": "Door",
          "description": "Door number within the building."
        },
        "street": {
          "type": "string",
          "title": "Street",
          "description": "Fist line of street."
        },
        "street_extra": {
          "type": "string",
          "title": "Extended Street",
          "description": "Additional street address details."
        },
        "locality": {
          "type": "string",
          "title": "Locality",
          "description": "The village"
        },
        "region": {
          "type": "string",
          "title": "Region",
          "description": "Province"
        },
        "code": {
          "type": "string",
          "title": "Code",
          "description": "Post or ZIP code."
        },
        "country": {
          "type": "string",
          "title": "Country",
          "description": "ISO country code."
        },
        "coords": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/org.Coordinates",
          "title": "Coordinates",
          "description": "For when the postal address is not sufficient"
        },
        "meta": {
          "patternProperties": {
            ".*": {
              "type": "string"
            }
          },
          "type": "object",
          "title": "Meta"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "org.Coordinates": {
      "properties": {
        "lat": {
          "type": "number",
          "title": "Latitude",
          "description": "Decimal latitude coordinate."
        },
        "lon": {
          "type": "number",
          "title": "Longitude",
          "description": "Decimal longitude coordinate."
        },
        "w3w": {
          "type": "string",
          "title": "What 3 Words",
          "description": "Text coordinates compose of three words."
        },
        "geohash": {
          "type": "string",
          "title": "Geohash",
          "description": "Single string coordinate based on geohash standard."
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "org.Date": {
      "type": "string",
      "title": "Date",
      "description": "Civil date in simplified ISO format, like 2021-05-26",
      "format": "date"
    },
    "org.Discount": {
      "required": [
        "val"
      ],
      "properties": {
        "rate": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/num.Percentage",
          "title": "Rate"
        },
        "val": {
          "$ref": "#/definitions/num.Amount",
          "title": "Value",
          "description": "How much to deduct"
        },
        "reason": {
          "type": "string",
          "title": "Reason",
          "description": "Description as to why this discount was applied."
        },
        "code": {
          "type": "string",
          "title": "Code",
          "description": "Reason Code"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "org.Email": {
      "properties": {
        "uuid": {
          "type": "string"
        },
        "label": {
          "type": "string",
          "title": "Label",
          "description": "Identifier for the email."
        },
        "addr": {
          "type": "string",
          "title": "Address",
          "description": "Electronic mailing address."
        },
        "meta": {
          "patternProperties": {
            ".*": {
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "org.Item": {
      "required": [
        "name",
        "price"
      ],
      "properties": {
        "uuid": {
          "type": "string",
          "title": "UUID",
          "description": "Unique identify of this item independent of the Supplier IDs"
        },
        "name": {
          "type": "string"
        },
        "desc": {
          "type": "string"
        },
        "currency": {
          "type": "string",
          "title": "Currency",
          "description": "Only required if this line has a different currency from the rest."
        },
        "price": {
          "$ref": "#/definitions/num.Amount",
          "title": "Price",
          "description": "Net price without tax of the item being sold"
        },
        "unit": {
          "type": "string",
          "title": "Unit",
          "description": "Code for unit of the item being sold"
        },
        "supplier_ids": {
          "items": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "$ref": "#/definitions/org.ItemID"
          },
          "type": "array",
          "title": "Supplier IDs"
        },
        "origin": {
          "type": "string",
          "title": "Country of Origin",
          "description": "Country code of where this item was from originally."
        },
        "meta": {
          "patternProperties": {
            ".*": {
              "type": "string"
            }
          },
          "type": "object",
          "title": "Meta"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "org.ItemID": {
      "required": [
        "value"
      ],
      "properties": {
        "value": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "org.Name": {
      "required": [
        "given",
        "surname"
      ],
      "properties": {
        "uuid": {
          "type": "string",
          "title": "UUID",
          "description": "Unique identity code"
        },
        "alias": {
          "type": "string",
          "title": "Alias",
          "description": "What the person would like to be called"
        },
        "prefix": {
          "type": "string"
        },
        "given": {
          "type": "string",
          "title": "Given",
          "description": "The person's given name"
        },
        "middle": {
          "type": "string",
          "title": "Middle",
          "description": "Middle names or initials"
        },
        "surname": {
          "type": "string"
        },
        "surname2": {
          "type": "string"
        },
        "suffix": {
          "type": "string"
        },
        "meta": {
          "patternProperties": {
            ".*": {
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "org.Party": {
      "required": [
        "name"
      ],
      "properties": {
        "uuid": {
          "type": "string",
          "title": "UUID",
          "description": "Unique identity code"
        },
        "tax_id": {
          "type": "string",
          "title": "Tax ID"
        },
        "tax_scheme": {
          "type": "string",
          "title": "Tax Scheme"
        },
        "name": {
          "type": "string",
          "title": "Name"
        },
        "alias": {
          "type": "string",
          "title": "Alias"
        },
        "people": {
          "items": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "$ref": "#/definitions/org.Person"
          },
          "type": "array"
        },
        "addresses": {
          "items": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "$ref": "#/definitions/org.Address"
          },
          "type": "array",
          "title": "Postal Addresses"
        },
        "emails": {
          "items": {
            "$ref": "#/definitions/org.Email"
          },
          "type": "array",
          "title": "Email Addresses"
        },
        "meta": {
          "patternProperties": {
            ".*": {
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "org.Person": {
      "required": [
        "name"
      ],
      "properties": {
        "uuid": {
          "type": "string",
          "title": "UUID",
          "description": "Unique identity code"
        },
        "role": {
          "type": "string",
          "title": "Role",
          "description": "Role within an organization"
        },
        "name": {
          "$schema": "http://json-schema.org/draft-04/schema#",
          "$ref": "#/definitions/org.Name"
        },
        "emails": {
          "items": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "$ref": "#/definitions/org.Email"
          },
          "type": "array"
        },
        "meta": {
          "patternProperties": {
            ".*": {
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "tax.CategoryTotal": {
      "required": [
        "code",
        "rates",
        "base",
        "value"
      ],
      "properties": {
        "code": {
          "type": "string"
        },
        "retained": {
          "type": "boolean"
        },
        "rates": {
          "items": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "$ref": "#/definitions/tax.RateTotal"
          },
          "type": "array"
        },
        "base": {
          "$ref": "#/definitions/num.Amount"
        },
        "value": {
          "$ref": "#/definitions/num.Amount"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "tax.Rate": {
      "required": [
        "cat",
        "code",
        "base",
        "percent",
        "value"
      ],
      "properties": {
        "cat": {
          "type": "string",
          "title": "Category Code"
        },
        "code": {
          "type": "string",
          "title": "Code"
        },
        "base": {
          "$ref": "#/definitions/num.Amount",
          "title": "Base",
          "description": "Base value to which taxes are added"
        },
        "percent": {
          "$ref": "#/definitions/num.Percentage",
          "title": "Percentage"
        },
        "value": {
          "$ref": "#/definitions/num.Amount",
          "title": "Value",
          "description": "The amount of tax applied"
        },
        "retained": {
          "type": "boolean",
          "title": "Retained",
          "description": "True when this tax is retained by the client."
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "tax.RateTotal": {
      "required": [
        "code",
        "base",
        "percent",
        "value"
      ],
      "properties": {
        "code": {
          "type": "string"
        },
        "base": {
          "$ref": "#/definitions/num.Amount"
        },
        "percent": {
          "$ref": "#/definitions/num.Percentage"
        },
        "value": {
          "$ref": "#/definitions/num.Amount"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "tax.Total": {
      "required": [
        "sum"
      ],
      "properties": {
        "categories": {
          "items": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "$ref": "#/definitions/tax.CategoryTotal"
          },
          "type": "array"
        },
        "sum": {
          "$ref": "#/definitions/num.Amount",
          "title": "Sum",
          "description": "Total value of all the taxes to be added or retained."
        }
      },
      "additionalProperties": false,
      "type": "object"
    }
  }
}